# Power Apps Code Component: React タイムシート・シェル (設計書)

## 概要
本書は、Reactを使用したPower Apps Code Component (PCF) として構築される、モダンでレスポンシブなタイムシート・アプリケーション・シェルの設計および実装計画について記述します。PCFフレームワーク内への埋め込みに適した、グラスモーフィズム、スムーズなアニメーション、インタラクティブ性を備えたプレミアムなユーザー体験の提供を目的とします。

## 技術スタック
- **フレームワーク**: Power Apps Code Component Framework (PCF)
- **ライブラリ**: React 18+
- **スタイリング**: Tailwind CSS (PCFのカプセル化のためにPostCSS設定が必要)
- **アイコン**: Lucide React
- **アニメーション**: Framer Motion
- **フォーム処理**: React Hook Form
- **言語**: TypeScript

## アーキテクチャ
アプリケーションは、標準的なPCFコントロール内にカプセル化されたシングルページReactコンポーネント (`App.tsx`) として構成されます。

### コンポーネント構造
```
src/
  components/
    Header.tsx       // トップバー
    TimesheetGrid.tsx// 週次ビューグリッド
    TimeEntryModal.tsx // エントリー追加/編集モーダル
    Sidebar.tsx      // ナビゲーション/ユーザープロファイル
  hooks/
    useTimesheet.ts  // モックデータ管理
  App.tsx            // メインコンテナ
  index.tsx          // PCFエントリーポイント
```

## UI/UX デザイン

### テーマ: "Glass & Gradient" (ガラスとグラデーション)
- **背景**: 繊細なアニメーション付きグラデーションメッシュ。
- **カード**: 半透明のガラス効果 (`backdrop-filter: blur(10px)`), 白/10% ボーダー, ソフトシャドウ。
- **タイポグラフィ**: Inter または system-ui, 可読性のための高いコントラストとプレミアム感を両立。
- **マイクロインタラクション**: ホバー時の浮き上がり, ボタン押下時の縮小, 光彩を伴うフォーカスリング。

### 主要画面

1.  **ダッシュボード (メインビュー)**
    *   **ヘッダー**: "Weekly Timesheet" ロゴ (左), ユーザーアバター & 日付セレクター (右)。
    *   **グリッド**: 7列 (月-日), プロジェクト/タスクごとの行。
    *   **セル**: インタラクティブエリア。クリックでモーダルを開く。入力済みのセルは時間とプロジェクトの色コードを表示。
    *   **フッター**: プログレスバー（視覚表現）付きの合計時間サマリー。

2.  **タイムエントリー・モーダル**
    *   **オーバーレイ**: 背景を暗くし、ぼかしを入れる。
    *   **フォーム**: プロジェクト（ドロップダウン）, タスク（入力）, 時間（入力）, 説明（テキストエリア）。
    *   **アクション**: "保存", "キャンセル", "削除"。

## 実装計画 (AI エージェント実行用)

### フェーズ 1: 環境セットアップ (Power Apps 設定)
1.  **環境設定**:
    *   ターゲット環境: `env_codeapps`
    *   ターゲットソリューション: `Timesheet`
2.  **PCFプロジェクトの初期化**: 標準的なReact PCFコントロール・シェルの作成。
2.  **Tailwindの設定**: Reactコンポーネントファイルをスキャンし、PCFコントロールがバンドルまたはインポート可能なCSSを出力するように設定。(注意: PCFはwebpackを使用するため、PostCSSローダーの設定が必要です)。
3.  **依存関係のインストール**: `lucide-react`, `framer-motion`, `react-hook-form`, `@headlessui/react` (または Radix), `clsx`, `tailwind-merge`。

### フェーズ 2: コアコンポーネント & レイアウト
1.  **アプリシェル**: グラデーション背景とグラスモーフィズムコンテナを持つ `App.tsx` を作成。
2.  **ナビゲーション**: レスポンシブなブレークポイントを持つ `Header` を実装。
3.  **グリッドレイアウト**: 週次ビュー用のCSS Grid構造を構築。モバイルでのスタッキング（積み重ね表示）を確認。

### フェーズ 3: 機能実装 (モック)
1.  **状態管理**: エントリーの配列を保持する `useState` を用いた `useTimesheet` フックを作成。
2.  **インタラクティブ性**:
    *   セルをクリックするとモーダルが開く。
    *   フォームを送信すると状態が更新される。
    *   視覚的フィードバック (例: "保存しました!" トースト)。

### フェーズ 4: ポッシュ (仕上げ)
1.  **アニメーション**: グリッドアイテムのエントリーアニメーションを追加 (スタaggered fade-in)。
2.  **ホバー効果**: カードやボタンに微細な拡大縮小効果を追加。
